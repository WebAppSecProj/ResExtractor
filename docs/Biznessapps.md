# Biznessapps Android Rev
作者：beizishaozi，如需转载请注明出处
## 目录
+ 简述
+ 应用特征描述
+ 资源数据提取
+ 结论

## 简述
Biznessapps框架支持Android、iOS、Web应用开发。该框架支持在线开发，但是不提供免费生成APK功能。在线开发网址：https://www.biznessapps.com/cms/dashboard。应用开发界面如下图所示。
<div align=left><img src="./image/Biznessapps/biznessapps_dev.png"/></div>
在开发过程build时，框架提供了很多模块，如下图所示
<div align=left><img src="./image/Biznessapps/biznessapps_features.png"/></div>
通过搭建模块以及对模块的设置，从而构造应用。这些模块中，有些支持设置网页浏览URL，有些配置通讯电话等。
构造完应用之后，在publish中提交应用，但这一步需要付费使用。
<div align=left><img src="./image/Biznessapps/biznessapps_submit.png"/></div>
整个开发过程步骤清晰，简单快速。
<br><br>

## 应用特征描述
### Android
通过关键词搜索，在virustotal和google play上发现了若干使用了该框架进行开发的应用。通过对这些应用进行反编译分析，这些应用的主Activity名字是确定的，老版为“com.biznessapps.main.MainActivity”，新版为“com.bzapps.main.MainActivity”，此外应用包名一般为com.app_***.layout，assets目录下文件固定等等其他信息。在实际python检测中，选择将该主Activity名字作为应用特征进行检索。
<div align=left><img src="./image/Biznessapps/biznessapps_mainactivity.png"/></div>
<div align=left><img src="./image/Biznessapps/biznessapps_mainactivity2.png"/></div>
<br><br>

## 资源数据提取
### Android
通过对应用进行逆向分析，在应用本地都没有保存网页资源。资源信息都是从网上下载的。从类com.bzapps.main.MainActivity中loadApp(boolean)函数入手，通过defineUrlRequest函数构造网页请求并发送
<div align=left><img src="./image/Biznessapps/biznessapps_url.png"/></div>
并在该类中对函数updateInitStateWithData进行调用，该函数会对网页请求结果进行处理
<div align=left><img src="./image/Biznessapps/biznessapps_result.png"/></div>
以应用为例
网页请求：https://www.cdnstabletransit.com/iphone/1.1.1/init.php?app_code=jcgop&ba_version=50&firstRun=0&notFirstLaunch=1&device_user_id=eaae73dd691273c3&device=iphone5 或者 https://www.cdnstabletransit.com/iphone/1.1.1/init.php?app_code=jcgop&ba_version=50&firstRun=0&notFirstLaunch=1&device_user_id=eaae73dd691273c3&device=iphone5&version=61&lang=zh-cn-%23hans&platform=android&device_user_id=eaae73dd691273c3

响应包：
[{"home":{"only4ipad":"0","home_sub_tabs":[],"image":"","linkedTabs":[],"manyImages":"NO","imagesInOrder":[]},"settings":{"maxBytes":33554432,"AdWhirlID":"","AppID":"822888","AppName":"Jefferson County GOP","AppIconName":"JeffersonGOP","appCode":"jcgop","AppDescription":"The mission of the Jefferson County GOP is to return to our roots of fiscal conservatism, improve our message delivery, connect on local campuses, keep former volunteers and the newly energized involved, build beyond our traditional base, have a strong candidate selection locally, and help support local and statewide candidates i","AppIconUrl":"https:\/\/images.cdnstabletransit.net\/pull_images\/822888.png?extra=icons&width=192&height=192&modified=1603232424&v=6.1.0.00&version=61","AppStoreURL":"https:\/\/apps.apple.com\/us\/app\/jefferson-county-gop\/id1537459420","CallButton":"NO","DirectionButton":"NO","TellFriendButton":"NO","ios_aspect":1,"android_aspect":1,"html5_aspect":1,"ShowNewsFeed":"NO","news_banner_linked_tab":0,"NewNav":"yes","ismodernsliding":0,"slidingEnabled":0,"is_protected":0,"protected_header_color":"286077","is_message_subscriptions":"0","message_icon_on":"1","message_icon_opacity":"80","message_icon_pos_h":"0","message_icon_pos_v":"0","message_icon_linked_tab":"10071126","message_tab_blurred":"0","music_icon_on":"0","music_icon_opacity":"80","music_icon_pos_h":"0","music_icon_pos_v":"0","multitasking":"0","music_icon_linked_tab":0,"with_status_bar":"1","global_background_color":"ffffff","social_background_image":"","social_background_color":"ffffff","social_blur_effect":"0","global_background_image":"","home_layout":"11","MailingListPrompt":"0","UseTextColors":1,"MusicOnFront":"0","MusicOnTop":"1","RSSIcon":"https:\/\/www.cdnstabletransit.com\/uploads\/icons\/rss.png","pushing_address":"198.57.176.205","ga_property_id":"UA-38357823-37","ga_property_id_android":"UA-38357823-3","facebook_api_key":"124661487570397","consumer_key":"ibeMh2JAmmQw09B1nfap5Q","consumer_secret":"dkomjgXm50XtNmWDn0FhJJpswGvdfIPqfYwfxqMar38","google_plus_client_id":"","ba_google_plus_client_id":"692676472427-3f2jisnlplks8q2a11a902gmu377aiov.apps.googleusercontent.com","splash_image":"https:\/\/images.cdnstabletransit.net\/pull_images\/822888_iphone5.png?extra=splash_shots&modified=1603232976&v=6.1.0.00&version=61","screenshot":"","moreTabBackgroundForiPad":"","moreTabBackgroundForiPhone":"","social_onboarding":0,"social_icon":1,"share_text":"Check out this app I'm building through Pocket Degree, LLC.! Web App: https:\/\/www.yourapp.co\/m\/jcgop\/","share_text_original":"Check out this app I'm building through Pocket Degree, LLC.! [web app]","hide_comment":0,"ads":{"show_ads":0,"ads_type":"admob","admob_pub_id":"","dfp_unit_id":""},"timezone":"-5.0","timezone_abbr":"America\/New_York","android_material_icon":"false","android_registration_url":"https:\/\/note.mobileapphelper.com\/api\/v1\/token\/receive","push_token_url":"https:\/\/app.cdnstabletransit.net\/iphone\/1.1.1\/apns.php","token_registration_url":"https:\/\/app.cdnstabletransit.net\/iphone\/1.1.1\/token_registration.php","location_update_url":"https:\/\/app.cdnstabletransit.net\/iphone\/1.1.1\/location_updates.php","is_esign_subscribed":0,"previewer_loading_color":"ffffff","home_background_color":"ffffff","seo_url":"","seo_title":"","seo_desc":"","seo_key":"","webapp_use_safari":1,"webapp_homescreen_prompt":1,"home_btn_label":"Home","PlayStoreURL":"https:\/\/play.google.com\/store\/apps\/details?id=com.app_jcgop.layout","HTML5URL":"https:\/\/www.yourapp.co\/m\/jcgop\/","google_api_keys":["AIzaSyAh3ck9q885xUo_y_pc4uCqzT-bcCD0TU8","AIzaSyC_hn5V_XufJCHdnF59po8usgo8qtZlLmE","AIzaSyDNnkaON3FFlCs-nmoGhRj1aQmTgirmJPw","AIzaSyDeQqriZja3i3O3DVSWPMIwcBlPMOTsWDg"],"disable_html":"0","html5_smart_banners":"0","rows":"2","cols":"4","tab_src":"","tab_tint":"ebdbcc","tab_tint_opacity":"0","tab_icon":"https:\/\/images.cdnstabletransit.net\/tab_icons\/1\/","tab_text":"cb202f","tab_font":"Open Sans","tab_font_weight":"regular","tab_showtext":"1","header_src":"https:\/\/images.cdnstabletransit.net\/custom_images\/jcgop\/templates\/headers\/custom_p7dpig.png?modified=1596650514&v=6.1.0.00&version=61","header_width":"320","header_height":"44","header_align":"center","header_tint":"f8f8f8","header_tint_opacity":0,"is_background":"1","is_normal_header":1,"footer_tint":"555555","global_header":"","NavigationBarColor":"4f212b","NavigationTextColor":"ffffff","NavigationTextShadowColor":"4f212b","nav_tint_opacity":"100","SectionBarColor":"ededed","SectionBarTextColor":"000000","OddRowColor":"ededed","OddRowTextColor":"000000","EvenRowColor":"ededed","EvenRowTextColor":"000000","moreButtonNavigation":"YES","FeatureTextColor":"000000","ButtonTextColor":"ffffff","ButtonBgColor":"4f212b","premium_navigation_position":"3","blur_effect":"0","showMenuHint":"0","menuHint":"Menu","homescreenWidgetColor":"cb202f","branding":{"type":0,"left":28.06122,"width":43.87755,"top":12.13018,"ratio":2.52941},"blur_effect_home_screen":"0","blur_effect_more_tab":"0","moreTab":{"TabLabel":"More","TabImage":"custom_822888_v2_0.png?modified=1596650689","NavigationController":"YES","TabBackgroundColor":"","custom_design":"NO"},"show_notification_popup":0,"geo_fence_mode":1,"geo_fence_paths":[],"geo_fence_circles":[],"messagesTab":{"custom_design":"NO","TabLabel":"Alerts"},"signup_tab_enabled":0,"consent_enabled":0,"signup_tab":{"content":{"member_on":0,"signup":{"active":"1","head":"","msg":"","button":"","skip":"0","facebook":1,"twitter":1,"google":0,"show_user_profile":"1"},"name":{"active":"1","head":"Welcome!","msg":"Earn rewards and access special offers all from the palm of your hand!","button":""},"dob":{"active":"1","head":"Hi!","msg":"Wouldn't you like to receive a special Birthday gift from us? That's what we thought.","button":""},"pwd_reset":{"active":"1","head":"Reset Password","msg":"Please enter the email address associated with your account. Reset instructions will be emailed to you.","button":""},"pwd_reset_done":{"active":"1","head":"Thanks!","msg":"Your password reset request has been sent. Check your email for instructions on resetting it.","button":""},"loyalty":{"active":"1","head":"Sign Up to Earn Awesome Rewards!","msg":"","button":"","trigger":"1"},"reserv":{"active":"1","head":"Sign Up to Make a Reservation!","msg":"","button":""}},"design":{"SectionBarTextColor":"000000","TabBackgroundColor":"ffffff","ButtonBgColor":"4f212b","ButtonTextColor":"000000","branding":"https:\/\/images.cdnstabletransit.net\/custom_images\/jcgop\/templates\/headers\/custom_p7dpig.png?modified=1596650514&v=6.1.0.00&version=61","tab_bg":"https:\/\/images.cdnstabletransit.net\/images\/templates\/default_set\/phone\/signup_bg.png?width=&modified=&v=50.27"}},"membership":{"tab_id":"","tab_label":"","member_enabled":0,"guest_enabled":0,"background":"https:\/\/images.cdnstabletransit.net\/images\/templates\/default_set\/phone\/signup_bg.png?width=&modified=&v=50.27","bg_color":"ffffff","is_blurred":0,"tint_color":"000000","button_text_color":"ffffff","button_guest_login":"","button_guest_login_raw":""},"message_tab_label":"Alerts","message_tab_display_widget_only":0,"instruction_tab_enabled":0,"checkForCampaignReviewOnResume":0,"web_fonts":{"Open Sans:regular":"http:\/\/fonts.gstatic.com\/s\/opensans\/v17\/mem8YaGs126MiZpBA-U1UpcaXcl0Aw.ttf"}},"tabs":[{"TabLabel":"Alerts","TabImage":"custom_822888_v2_10071126.png?modified=1596650689","ViewController":"MessagesViewController","NavigationController":"YES","LastUpdated":"2020-11-02 18:44:21","ask_back_prompt":"0","tab_id":"10071126","TabBackground":"","blur_effect":"0","TabBackgroundColor":"","custom_design":"NO","navBanner":"\/custom_images\/jcgop\/templates\/nav_banners\/phone\/custom_sryksh.png?v=50.27"},{"TabLabel":"Candidates","TabImage":"","ViewController":"WebViewController","NavigationController":"YES","LastUpdated":"2020-11-02 18:44:21","URL":"https:\/\/jeffersoncountyohiogop.com\/candidates\/","ask_back_prompt":"0","openInSafari":"NO","allow_printing":"NO","is_sfsafari":"NO","showNavigationBar":"0","tab_id":"10167436","TabBackground":"","blur_effect":"0","TabBackgroundColor":"","custom_design":"NO","navBanner":"\/custom_images\/jcgop\/templates\/nav_banners\/phone\/custom_sryksh.png?v=50.27"},{"TabLabel":"Donate","TabImage":"","ViewController":"WebViewController","NavigationController":"YES","LastUpdated":"2020-11-02 18:44:21","URL":"https:\/\/jeffersoncountyohiogop.com\/donate\/","ask_back_prompt":"0","openInSafari":"NO","allow_printing":"NO","is_sfsafari":"NO","showNavigationBar":"0","tab_id":"10167442","TabBackground":"","blur_effect":"0","TabBackgroundColor":"","custom_design":"NO","navBanner":"\/custom_images\/jcgop\/templates\/nav_banners\/phone\/custom_sryksh.png?v=50.27"},{"TabLabel":"Register To Vote","TabImage":"","ViewController":"WebViewController","NavigationController":"YES","LastUpdated":"2020-11-02 18:44:21","URL":"https:\/\/olvr.ohiosos.gov\/","ask_back_prompt":"0","openInSafari":"NO","allow_printing":"YES","is_sfsafari":"NO","showNavigationBar":"0","tab_id":"10167435","TabBackground":"","blur_effect":"0","TabBackgroundColor":"","custom_design":"NO","navBanner":"\/custom_images\/jcgop\/templates\/nav_banners\/phone\/custom_sryksh.png?v=50.27"},{"TabLabel":"News","TabImage":"","ViewController":"WebViewController","NavigationController":"YES","LastUpdated":"2020-11-02 18:44:21","URL":"https:\/\/jeffersoncountyohiogop.com\/news\/","ask_back_prompt":"0","openInSafari":"NO","allow_printing":"NO","is_sfsafari":"NO","showNavigationBar":"0","tab_id":"10167440","TabBackground":"","blur_effect":"0","TabBackgroundColor":"","custom_design":"NO","navBanner":"\/custom_images\/jcgop\/templates\/nav_banners\/phone\/custom_sryksh.png?v=50.27"},{"TabLabel":"Events","TabImage":"","ViewController":"WebViewController","NavigationController":"YES","LastUpdated":"2020-11-02 18:44:21","URL":"https:\/\/jeffersoncountyohiogop.com\/events\/","ask_back_prompt":"0","openInSafari":"NO","allow_printing":"NO","is_sfsafari":"NO","showNavigationBar":"0","tab_id":"10167439","TabBackground":"","blur_effect":"0","TabBackgroundColor":"","custom_design":"NO","navBanner":"\/custom_images\/jcgop\/templates\/nav_banners\/phone\/custom_sryksh.png?v=50.27"},{"TabLabel":"Volunteer","TabImage":"","ViewController":"WebViewController","NavigationController":"YES","LastUpdated":"2020-11-02 18:44:21","URL":"https:\/\/jeffersoncountyohiogop.com\/volunteer\/","ask_back_prompt":"0","openInSafari":"NO","allow_printing":"NO","is_sfsafari":"NO","showNavigationBar":"0","tab_id":"10167437","TabBackground":"","blur_effect":"0","TabBackgroundColor":"","custom_design":"NO","navBanner":"\/custom_images\/jcgop\/templates\/nav_banners\/phone\/custom_sryksh.png?v=50.27"},{"TabLabel":"Social Media","TabImage":"custom_822888_v2_10071125.png?modified=1596650689","ViewController":"WebViewController","NavigationController":"YES","LastUpdated":"2020-11-02 18:44:21","OddRowColor":"ededed","EvenRowColor":"ededed","URL":"https:\/\/www.facebook.com\/Ohiojcrp\/","ask_back_prompt":"0","openInSafari":"NO","allow_printing":"NO","is_sfsafari":"NO","showNavigationBar":"0","tab_id":"10071125","TabBackground":"","blur_effect":"0","TabBackgroundColor":"","custom_design":"NO","navBanner":"\/custom_images\/jcgop\/templates\/nav_banners\/phone\/custom_sryksh.png?v=50.27"},{"TabLabel":"Contact","TabImage":"","ViewController":"WebViewController","NavigationController":"YES","LastUpdated":"2020-11-02 18:44:21","URL":"https:\/\/jeffersoncountyohiogop.com\/contact\/","ask_back_prompt":"0","openInSafari":"NO","allow_printing":"NO","is_sfsafari":"NO","showNavigationBar":"0","tab_id":"10167441","TabBackground":"","blur_effect":"0","TabBackgroundColor":"","custom_design":"NO","navBanner":"\/custom_images\/jcgop\/templates\/nav_banners\/phone\/custom_sryksh.png?v=50.27"}],"user_id":"eaae73dd691273c3"}]

应用各个模块的配置信息都保存在相应包“tabs”标签下，而且资源信息没有加密或编码，因此只需要直接读取网页资源信息就好。<br><br>
另外，经测试，对于不同应用的网页请求，只需修改app_code字段就行。不同应用的app_code字段值保存在values/strings.xml文件的"code_name"标签中，读取之后就可以构造出相应请求。device_user_id值为设备device_id值。

## 结论
Biznessapps框架支持模块化的Android和iOS应用开发，并且该框架也没有提供加密功能，因此为了提取网页资源信息，只需要发送请求获取响应包即可。